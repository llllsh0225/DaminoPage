<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MenuDAO">

	<insert id="insertPizza"
		parameterType="com.damino.web.admin.menu.PizzaVO">
		INSERT INTO pizza (p_code, p_name, p_type, p_size_m, p_size_l, p_price_m, p_price_l, p_dough, p_image, gross_weight_m, gross_weight_l, onetime_basis_m, onetime_basis_l, onetime_weight_m, onetime_weight_l, kcal_m, kcal_l, protein_m, protein_l, fat_m, fat_l, natrium_m, natrium_l, sugars_m, sugars_l, seq)
		VALUES('P'||LPAD(pizza_seq.nextval, 3, '0'), #{p_name}, #{p_type}, 'M', 'L', #{p_price_m}, #{p_price_l}, #{p_dough}, #{p_image}, #{gross_weight_m}, #{gross_weight_l}, #{onetime_basis_m}, #{onetime_basis_l}, #{onetime_weight_m}, #{onetime_weight_l}, #{kcal_m}, #{kcal_l}, #{protein_m}, #{protein_l}, #{fat_m}, #{fat_l}, #{natrium_m}, #{natrium_l}, #{sugars_m}, #{sugars_l}, (select nvl(max(seq), 0)+1 from pizza))
	</insert>
	
	<insert id="insertSide"
		parameterType="com.damino.web.admin.menu.SideVO">
		INSERT ALL
			INTO side (s_code, s_name, s_price, s_image, seq)
			VALUES('S'||LPAD(side_seq.nextval, 3, '0'), #{s_name}, #{s_price}, #{s_image}, (select nvl(max(seq), 0)+1 from side))
			INTO s_nutrients (s_nutrients_code, gross_weight, kcal, protein, fat, natrium, sugars, s_code)
			VALUES('NS'||LPAD(s_nutrients_seq.nextval, 3, '0'), #{gross_weight}, #{kcal}, #{protein}, #{fat}, #{natrium}, #{sugars}, 'S'||LPAD(side_seq.nextval, 3, '0'))
		SELECT * FROM DUAL
	</insert>
	
	<insert id="insertDrinkEtc"
		parameterType="com.damino.web.admin.menu.DrinkEtcVO">
		INSERT INTO drink_etc (d_code, d_name, d_price, d_image, seq)
		VALUES ('D'||LPAD(drink_etc_seq.nextval, 3, '0'), #{d_name}, #{d_price}, #{d_image}, (select nvl(max(seq), 0)+1 from drink_etc))
	</insert>
	
	<insert id="insertTopping"
		parameterType="com.damino.web.admin.menu.ToppingVO">
		INSERT INTO topping (t_code, t_name, t_type, t_price, t_image, seq)
		VALUES ('T'||LPAD(topping_seq.nextval, 3, '0'), #{t_name}, #{t_type}, #{t_price}, #{t_image}, (select nvl(max(seq), 0)+1 from topping))
	</insert>

	<select id="getPizzaList" 
		resultType="com.damino.web.admin.menu.PizzaVO">
		SELECT seq, P_CODE, P_NAME, P_TYPE, P_PRICE_M, P_PRICE_L
		FROM PIZZA
	</select>

	<select id="getNutrients"
		resultType="com.damino.web.admin.menu.PizzaVO">
		SELECT *
		FROM p_nutrients
	</select>
	
	<select id="getToppingList"
		resultType="com.damino.web.admin.menu.ToppingVO">
		SELECT seq, t_code, t_name, t_type, t_price
		FROM topping
	</select>
		
	<select id="getSideList"	
		resultType="com.damino.web.admin.menu.SideVO">
		SELECT seq, s_code, s_name, s_price
		FROM side
	</select>

	<select id="getDrinkEtcList"	
		resultType="com.damino.web.admin.menu.DrinkEtcVO">
		SELECT seq, d_code, d_name, d_price
		FROM drink_Etc
	</select>

		
	<select id="getPizza" parameterType="com.damino.web.admin.menu.PizzaVO"
		resultType="com.damino.web.admin.menu.PizzaVO">
        
        SELECT * FROM pizza 
        where seq=#{seq}
		
	</select>
	
</mapper>
